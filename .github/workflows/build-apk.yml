name: ğŸµ ì„±ê²½ MP3 í”Œë ˆì´ì–´ APK ë¹Œë“œ

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]
  workflow_dispatch:  # ìˆ˜ë™ ì‹¤í–‰ì„ ìœ„í•œ ì¤‘ìš”í•œ ì„¤ì •!
    inputs:
      build_type:
        description: 'ë¹Œë“œ íƒ€ì…ì„ ì„ íƒí•˜ì„¸ìš”'
        required: true
        default: 'debug'
        type: choice
        options:
          - debug
          - release

jobs:
  build-apk:
    runs-on: ubuntu-latest

    steps:
    - name: ğŸ“¥ ì†ŒìŠ¤ì½”ë“œ ì²´í¬ì•„ì›ƒ
      uses: actions/checkout@v4

    - name: ğŸ Python 3.8 ì„¤ì •
      uses: actions/setup-python@v4
      with:
        python-version: '3.8'

    - name: â˜• Java 17 ì„¤ì • (Android SDK í˜¸í™˜ì„±)
      uses: actions/setup-java@v4
      with:
        distribution: 'temurin'
        java-version: '17'

    - name: ğŸ“¦ ì‹œìŠ¤í…œ ì˜ì¡´ì„± ì„¤ì¹˜
      run: |
        sudo apt-get update
        sudo apt-get install -y git zip unzip openjdk-8-jdk python3-pip autoconf libtool pkg-config zlib1g-dev libncurses5-dev libncursesw5-dev libtinfo-dev cmake libffi-dev libssl-dev build-essential

    - name: ğŸ”§ Python ì˜ì¡´ì„± ì„¤ì¹˜
      run: |
        python -m pip install --upgrade pip
        pip install buildozer cython kivy[base] requests

    - name: ğŸ“± Android SDK ìˆ˜ë™ ì„¤ì¹˜ (ì•ˆì •ì„± í–¥ìƒ)
      run: |
        echo "=== Android SDK ìˆ˜ë™ ì„¤ì¹˜ ì‹œì‘ ==="
        
        # Android SDK ë””ë ‰í† ë¦¬ ìƒì„±
        export ANDROID_HOME=$HOME/android-sdk
        export ANDROID_SDK_ROOT=$HOME/android-sdk
        mkdir -p $ANDROID_HOME
        
        # cmdline-tools ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜
        echo "cmdline-tools ë‹¤ìš´ë¡œë“œ ì¤‘..."
        wget -q https://dl.google.com/android/repository/commandlinetools-linux-11076708_latest.zip -O android-tools.zip
        unzip -q android-tools.zip -d $ANDROID_HOME
        
        # cmdline-tools ê²½ë¡œ ìˆ˜ì •
        mkdir -p $ANDROID_HOME/cmdline-tools/latest
        mv $ANDROID_HOME/cmdline-tools/* $ANDROID_HOME/cmdline-tools/latest/ 2>/dev/null || true
        
        # ë¼ì´ì„ ìŠ¤ ìë™ ìŠ¹ì¸ (ëª¨ë“  ë²„ì „ ëŒ€ì‘)
        echo "SDK ë¼ì´ì„ ìŠ¤ ìŠ¹ì¸ ì¤‘..."
        mkdir -p $ANDROID_HOME/licenses
        echo "24333f8a63b6825ea9c5514f83c2829b004d1fee" > $ANDROID_HOME/licenses/android-sdk-license
        echo "84831b9409646a918e30573bab4c9c91346d8abd" > $ANDROID_HOME/licenses/android-sdk-preview-license
        # 36.1.0 ë° ì‹ ê·œ ë²„ì „ ëŒ€ì‘
        echo "481e45a93e7a0fa4998f65bb8bce0d9e7a2ad6e8" >> $ANDROID_HOME/licenses/android-sdk-license
        echo "d56f5187479451eabf01fb78af6dfcb131a6481e" >> $ANDROID_HOME/licenses/android-sdk-license
        echo "8933bad161af4178b1185d1a37fbf41ea5269c55" > $ANDROID_HOME/licenses/android-googletv-license
        
        # í•„ìˆ˜ ì»´í¬ë„ŒíŠ¸ ì„¤ì¹˜
        echo "í•„ìˆ˜ SDK ì»´í¬ë„ŒíŠ¸ ì„¤ì¹˜ ì¤‘..."
        export PATH=$PATH:$ANDROID_HOME/cmdline-tools/latest/bin
        
        # Java ë²„ì „ í™•ì¸
        echo "Java ë²„ì „: $(java -version 2>&1 | head -1)"
        
        # SDK ì»´í¬ë„ŒíŠ¸ ì„¤ì¹˜ (ëª¨ë“  í•„ìš” ë²„ì „ í¬í•¨)
        echo "ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸ ì„¤ì¹˜..."
        $ANDROID_HOME/cmdline-tools/latest/bin/sdkmanager "platform-tools" "platforms;android-30" "ndk;21.4.7075529" || echo "ê¸°ë³¸ SDK ì„¤ì¹˜ ì‹¤íŒ¨"
        
        echo "build-tools 30.0.3 ì„¤ì¹˜..."
        $ANDROID_HOME/cmdline-tools/latest/bin/sdkmanager "build-tools;30.0.3" || echo "30.0.3 ì„¤ì¹˜ ì‹¤íŒ¨"
        
        echo "build-tools 36.1.0 ì„¤ì¹˜ (ë°±ì—…ìš©)..."
        $ANDROID_HOME/cmdline-tools/latest/bin/sdkmanager "build-tools;36.1.0" || echo "36.1.0 ì„¤ì¹˜ ì‹¤íŒ¨ - ë¼ì´ì„ ìŠ¤ ë¬¸ì œì¼ ìˆ˜ ìˆìŒ"
        
        # ì„¤ì¹˜ í™•ì¸
        echo "\n=== ì„¤ì¹˜ ê²°ê³¼ í™•ì¸ ==="
        ls -la $ANDROID_HOME/ || echo "Android SDK ë””ë ‰í† ë¦¬ ì—†ìŒ"
        ls -la $ANDROID_HOME/build-tools/ 2>/dev/null || echo "build-tools ë””ë ‰í† ë¦¬ ì—†ìŒ"
        
        # í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
        echo "ANDROID_HOME=$ANDROID_HOME" >> $GITHUB_ENV
        echo "ANDROID_SDK_ROOT=$ANDROID_HOME" >> $GITHUB_ENV
        echo "PATH=$PATH:$ANDROID_HOME/cmdline-tools/latest/bin:$ANDROID_HOME/platform-tools:$ANDROID_HOME/build-tools/30.0.3" >> $GITHUB_ENV
        
    - name: ğŸ” Android SDK ìƒíƒœ ë””ë²„ê¹… ë° ì§„ë‹¨
      run: |
        echo "=== ì´ˆê¸° Android SDK ìƒíƒœ í™•ì¸ ==="
        echo "ANDROID_SDK_ROOT: $ANDROID_SDK_ROOT"
        echo "ANDROID_HOME í™˜ê²½ë³€ìˆ˜: $ANDROID_HOME"
        
        # ê¸°ë³¸ SDK êµ¬ì¡° í™•ì¸
        echo "\n=== SDK ë””ë ‰í† ë¦¬ êµ¬ì¡° ==="
        ls -la $ANDROID_SDK_ROOT/ || echo "SDK ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ì—†ìŒ"
        
        # cmdline-tools í™•ì¸
        echo "\n=== cmdline-tools í™•ì¸ ==="
        ls -la $ANDROID_SDK_ROOT/cmdline-tools/ 2>/dev/null || echo "cmdline-tools ë””ë ‰í† ë¦¬ ì—†ìŒ"
        ls -la $ANDROID_SDK_ROOT/cmdline-tools/latest/ 2>/dev/null || echo "cmdline-tools/latest ë””ë ‰í† ë¦¬ ì—†ìŒ"
        
        # ê¸°ì¡´ build-tools í™•ì¸
        echo "\n=== ê¸°ì¡´ build-tools í™•ì¸ ==="
        ls -la $ANDROID_SDK_ROOT/build-tools/ 2>/dev/null || echo "build-tools ë””ë ‰í† ë¦¬ ì—†ìŒ"
        
        # ê¸°ì¡´ AIDL ë„êµ¬ ê²€ìƒ‰
        echo "\n=== ê¸°ì¡´ AIDL ë„êµ¬ ê²€ìƒ‰ ==="
        find $ANDROID_SDK_ROOT -name "aidl" -type f 2>/dev/null || echo "AIDL ë„êµ¬ ì—†ìŒ"
        
        # ë¼ì´ì„ ìŠ¤ ìƒíƒœ í™•ì¸
        echo "\n=== ë¼ì´ì„ ìŠ¤ ìƒíƒœ í™•ì¸ ==="
        ls -la $ANDROID_SDK_ROOT/licenses/ 2>/dev/null || echo "ë¼ì´ì„ ìŠ¤ ë””ë ‰í† ë¦¬ ì—†ìŒ"

    - name: ğŸ”§ Android SDK ê²½ë¡œ ë° ë„êµ¬ ì„¤ì •
      run: |
        # í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
        export ANDROID_HOME=$ANDROID_SDK_ROOT
        export ANDROID_SDK_HOME=$ANDROID_SDK_ROOT
        export PATH=$PATH:$ANDROID_HOME/cmdline-tools/latest/bin:$ANDROID_HOME/platform-tools
        
        echo "=== ì„¤ì •ëœ í™˜ê²½ ë³€ìˆ˜ ==="
        echo "ANDROID_HOME: $ANDROID_HOME"
        echo "ANDROID_SDK_ROOT: $ANDROID_SDK_ROOT"
        echo "PATH: $PATH"
        
        # sdkmanager ì‚¬ìš© ê°€ëŠ¥ì„± í™•ì¸
        echo "\n=== sdkmanager ì‚¬ìš© ê°€ëŠ¥ì„± í™•ì¸ ==="
        if [ -f "$ANDROID_HOME/cmdline-tools/latest/bin/sdkmanager" ]; then
            echo "âœ… sdkmanager ë°œê²¬"
            $ANDROID_HOME/cmdline-tools/latest/bin/sdkmanager --version
        else
            echo "âŒ sdkmanager ì—†ìŒ. ë‹¤ë¥¸ ìœ„ì¹˜ ê²€ìƒ‰..."
            find $ANDROID_HOME -name "sdkmanager" -type f 2>/dev/null | head -3
        fi
        
        # ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ ë¦¬ìŠ¤íŠ¸ í™•ì¸
        echo "\n=== ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ í™•ì¸ ==="
        $ANDROID_HOME/cmdline-tools/latest/bin/sdkmanager --list_installed || echo "sdkmanager list ì‹¤íŒ¨"
        
        echo "\n=== í•„ìˆ˜ ì»´í¬ë„ŒíŠ¸ ì„¤ì¹˜ ì‹œë„ ==="
        # 30.0.3 ë²„ì „ ëª…ì‹œì  ì„¤ì¹˜
        echo "30.0.3 build-tools ì„¤ì¹˜ ì‹œë„..."
        $ANDROID_HOME/cmdline-tools/latest/bin/sdkmanager "build-tools;30.0.3" || echo "30.0.3 ì„¤ì¹˜ ì‹¤íŒ¨"
        
        echo "\nplatforms ì„¤ì¹˜ ì‹œë„..."
        $ANDROID_HOME/cmdline-tools/latest/bin/sdkmanager "platforms;android-30" || echo "platforms ì„¤ì¹˜ ì‹¤íŒ¨"
        
        echo "\nNDK ì„¤ì¹˜ ì‹œë„..."
        $ANDROID_HOME/cmdline-tools/latest/bin/sdkmanager "ndk;21.4.7075529" || echo "NDK ì„¤ì¹˜ ì‹¤íŒ¨"
        
        # ì„¤ì¹˜ í›„ ìƒíƒœ í™•ì¸
        echo "\n=== ì„¤ì¹˜ í›„ build-tools ìƒíƒœ ==="
        ls -la $ANDROID_HOME/build-tools/ 2>/dev/null || echo "build-tools ë””ë ‰í† ë¦¬ ì—¬ì „íˆ ì—†ìŒ"
        
        # AIDL ë„êµ¬ ê²€ìƒ‰ ë° ì„¤ì¹˜
        echo "\n=== AIDL ë„êµ¬ ê²€ìƒ‰ ë° ì„¤ì • ==="
        AIDL_FOUND=false
        
        # 30.0.3ì—ì„œ ë¨¼ì € ì°¾ê¸°
        if [ -f "$ANDROID_HOME/build-tools/30.0.3/aidl" ]; then
            echo "âœ… AIDL ë°œê²¬: 30.0.3 ë²„ì „"
            chmod +x $ANDROID_HOME/build-tools/30.0.3/aidl
            AIDL_FOUND=true
        else
            echo "âš ï¸ 30.0.3ì— AIDL ì—†ìŒ. ë‹¤ë¥¸ ë²„ì „ ê²€ìƒ‰..."
            
            # ì „ì²´ ê²€ìƒ‰
            AIDL_PATHS=$(find $ANDROID_HOME -name "aidl" -type f 2>/dev/null)
            echo "AIDL ë„êµ¬ ì „ì²´ ê²½ë¡œ:"
            echo "$AIDL_PATHS"
            
            # ì²« ë²ˆì§¸ AIDL ë³µì‚¬
            if [ -n "$AIDL_PATHS" ]; then
                FIRST_AIDL=$(echo "$AIDL_PATHS" | head -1)
                echo "\ní•´ê²°ì±…: $FIRST_AIDLì„ 30.0.3ìœ¼ë¡œ ë³µì‚¬"
                mkdir -p "$ANDROID_HOME/build-tools/30.0.3"
                cp "$FIRST_AIDL" "$ANDROID_HOME/build-tools/30.0.3/aidl"
                chmod +x "$ANDROID_HOME/build-tools/30.0.3/aidl"
                AIDL_FOUND=true
            fi
        fi
        
        # ìµœì¢… AIDL ìƒíƒœ
        if [ "$AIDL_FOUND" = "true" ]; then
            echo "\nğŸ‰ AIDL ë„êµ¬ ì¤€ë¹„ ì™„ë£Œ!"
            ls -la $ANDROID_HOME/build-tools/30.0.3/aidl
        else
            echo "\nâŒ AIDL ë„êµ¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
        fi
        
        # buildozerê°€ ê¸°ëŒ€í•˜ëŠ” í‘œì¤€ ê²½ë¡œë¡œ ì‹¬ë³¼ë¦­ ë§í¬ ìƒì„±
        echo "\n=== buildozer í‘œì¤€ ê²½ë¡œ ì„¤ì • ==="
        sudo mkdir -p /opt/android-sdk-linux
        sudo ln -sf $ANDROID_HOME/* /opt/android-sdk-linux/ 2>/dev/null || true
        sudo chown -R $USER:$USER /opt/android-sdk-linux/ || true
        
        # buildozerìš© í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
        echo "ANDROID_HOME=/opt/android-sdk-linux" >> $GITHUB_ENV
        echo "ANDROID_SDK_ROOT=/opt/android-sdk-linux" >> $GITHUB_ENV
        echo "ANDROID_NDK_HOME=/opt/android-sdk-linux/ndk/21.4.7075529" >> $GITHUB_ENV
        echo "PATH=$PATH:/opt/android-sdk-linux/cmdline-tools/latest/bin:/opt/android-sdk-linux/platform-tools:/opt/android-sdk-linux/build-tools/30.0.3" >> $GITHUB_ENV
        
        # í‘œì¤€ ê²½ë¡œ ìƒíƒœ í™•ì¸
        echo "\n=== í‘œì¤€ ê²½ë¡œ ìƒíƒœ í™•ì¸ ==="
        ls -la /opt/android-sdk-linux/ 2>/dev/null || echo "ì‹¬ë³¼ë¦­ ë§í¬ ìƒì„± ì‹¤íŒ¨"

    - name: ğŸ“± Android SDK ë¼ì´ì„ ìŠ¤ ê°•ì œ ìŠ¹ì¸
      run: |
        echo "=== Android SDK ë¼ì´ì„ ìŠ¤ ê°•ì œ ìŠ¹ì¸ ==="
        
        # í‘œì¤€ ê²½ë¡œë¡œ ë¼ì´ì„ ìŠ¤ ë””ë ‰í† ë¦¬ ìƒì„±
        sudo mkdir -p /opt/android-sdk-linux/licenses
        
        # ëª¨ë“  ë¼ì´ì„ ìŠ¤ ê°•ì œ ìŠ¹ì¸ (ìµœì‹  í•´ì‹œ í¬í•¨)
        echo "24333f8a63b6825ea9c5514f83c2829b004d1fee" | sudo tee /opt/android-sdk-linux/licenses/android-sdk-license > /dev/null
        echo "84831b9409646a918e30573bab4c9c91346d8abd" | sudo tee /opt/android-sdk-linux/licenses/android-sdk-preview-license > /dev/null
        echo "d975f751698a77b662f1254ddbeed3901e976f5a" | sudo tee /opt/android-sdk-linux/licenses/intel-android-extra-license > /dev/null
        echo "8933bad161af4178b1185d1a37fbf41ea5269c55" | sudo tee /opt/android-sdk-linux/licenses/android-googletv-license > /dev/null
        echo "79120722343a6f314e0719f863036c702b0e6b2a" | sudo tee /opt/android-sdk-linux/licenses/android-sdk-arm-dbt-license > /dev/null
        echo "e9acab5b5fbb560a72cfaecce8946896ff6aab9d" | sudo tee /opt/android-sdk-linux/licenses/mips-android-sysimage-license > /dev/null
        echo "504667f4c0de7af1a06de9f4b1727b84351f2910" | sudo tee /opt/android-sdk-linux/licenses/google-gdk-license > /dev/null
        
        # 2024ë…„ ì´í›„ ì¶”ê°€ ë¼ì´ì„ ìŠ¤ (ìƒˆë¡œìš´ build-tools ëŒ€ì‘)
        echo "481e45a93e7a0fa4998f65bb8bce0d9e7a2ad6e8" | sudo tee -a /opt/android-sdk-linux/licenses/android-sdk-license > /dev/null
        echo "d56f5187479451eabf01fb78af6dfcb131a6481e" | sudo tee -a /opt/android-sdk-linux/licenses/android-sdk-license > /dev/null
        echo "24333f8a63b6825ea9c5514f83c2829b004d1fee" | sudo tee -a /opt/android-sdk-linux/licenses/android-sdk-license > /dev/null
        
        # ë¼ì´ì„ ìŠ¤ íŒŒì¼ ê¶Œí•œ ì„¤ì •
        sudo chown -R $USER:$USER /opt/android-sdk-linux/licenses/
        
        echo "âœ… ë¼ì´ì„ ìŠ¤ ìŠ¹ì¸ ì™„ë£Œ"
        ls -la /opt/android-sdk-linux/licenses/

    - name: ğŸ”„ AIDL ë„êµ¬ ìµœì¢… ê²€ì¦ ë° ëŒ€ì•ˆ ì„¤ì¹˜
      run: |
        echo "=== AIDL ë„êµ¬ ìµœì¢… ê²€ì¦ ì‹œì‘ ==="
        
        # í™˜ê²½ ë³€ìˆ˜ ë‹¤ì‹œ ì„¤ì • (í‘œì¤€ ê²½ë¡œ ì‚¬ìš©)
        export ANDROID_HOME=/opt/android-sdk-linux
        export ANDROID_SDK_ROOT=/opt/android-sdk-linux
        export PATH=$PATH:$ANDROID_HOME/cmdline-tools/latest/bin:$ANDROID_HOME/platform-tools:$ANDROID_HOME/build-tools/30.0.3
        
        # AIDL ë„êµ¬ ê²€ìƒ‰ ë° ê²€ì¦
        echo "1. í‘œì¤€ ìœ„ì¹˜ í™•ì¸: $ANDROID_HOME/build-tools/30.0.3/aidl"
        if [ -f "$ANDROID_HOME/build-tools/30.0.3/aidl" ]; then
            echo "âœ… AIDL ë„êµ¬ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤!"
            chmod +x $ANDROID_HOME/build-tools/30.0.3/aidl
            $ANDROID_HOME/build-tools/30.0.3/aidl --version || echo "ë²„ì „ í™•ì¸ ì‹¤íŒ¨, í•˜ì§€ë§Œ íŒŒì¼ì€ ì¡´ì¬"
        else
            echo "âŒ 30.0.3ì—ì„œ AIDLì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ë²„ì „ í™•ì¸ ì¤‘..."
            
            # ë‹¤ë¥¸ build-tools ë²„ì „ í™•ì¸
            for version_dir in $ANDROID_HOME/build-tools/*/; do
                if [ -f "${version_dir}aidl" ]; then
                    echo "âœ… AIDL ë°œê²¬: ${version_dir}aidl"
                    chmod +x ${version_dir}aidl
                    # 30.0.3 ë””ë ‰í† ë¦¬ ìƒì„± í›„ ë³µì‚¬
                    mkdir -p $ANDROID_HOME/build-tools/30.0.3/
                    cp ${version_dir}aidl $ANDROID_HOME/build-tools/30.0.3/aidl
                    chmod +x $ANDROID_HOME/build-tools/30.0.3/aidl
                    break
                fi
            done
        fi
        
        # ë§ˆì§€ë§‰ ìµœì¢… í™•ì¸
        if [ -f "$ANDROID_HOME/build-tools/30.0.3/aidl" ]; then
            echo "ğŸ‰ AIDL ë„êµ¬ ì¤€ë¹„ ì™„ë£Œ!"
            ls -la $ANDROID_HOME/build-tools/30.0.3/aidl
        else
            echo "âš ï¸ AIDL ë„êµ¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ëª¨ë“  build-tools ë‚´ìš©:"
            find $ANDROID_HOME -name "aidl" 2>/dev/null || echo "AIDL ë„êµ¬ê°€ ì „í˜€ ì—†ìŠµë‹ˆë‹¤."
        fi

    - name: ğŸ“± Buildozer ì´ˆê¸°í™” ë° APK ë¹Œë“œ
      run: |
        echo "=== Buildozer APK ë¹Œë“œ ì‹œì‘ ==="
        
        # í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
        export ANDROID_HOME=$HOME/android-sdk
        export ANDROID_SDK_ROOT=$HOME/android-sdk
        export ANDROID_NDK_HOME=$HOME/android-sdk/ndk/21.4.7075529
        export PATH=$PATH:$ANDROID_HOME/cmdline-tools/latest/bin:$ANDROID_HOME/platform-tools:$ANDROID_HOME/build-tools/30.0.3
        
        # buildozer ê°•ì œ ì„¤ì •
        export BUILDOZER_BUILD_TOOLS_VERSION=30.0.3
        export BUILDOZER_ANDROID_API=30
        export BUILDOZER_ANDROID_NDK_API=21
        
        # AIDL ë„êµ¬ ê²½ë¡œ ê°•ì œ ì§€ì •
        if [ -f "$ANDROID_HOME/build-tools/30.0.3/aidl" ]; then
            export BUILDOZER_ANDROID_AIDL=$ANDROID_HOME/build-tools/30.0.3/aidl
            echo "âœ… AIDL ë„êµ¬ ê²½ë¡œ: $BUILDOZER_ANDROID_AIDL"
        elif [ -f "$ANDROID_HOME/build-tools/36.1.0/aidl" ]; then
            export BUILDOZER_ANDROID_AIDL=$ANDROID_HOME/build-tools/36.1.0/aidl
            echo "âœ… AIDL ë„êµ¬ ê²½ë¡œ: $BUILDOZER_ANDROID_AIDL (36.1.0ì—ì„œ ì°¾ìŒ)"
        else
            echo "âš ï¸ AIDL ë„êµ¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ"
        fi
        
        # í˜„ì¬ ìƒíƒœ í™•ì¸
        echo "\n=== ë¹Œë“œ í™˜ê²½ í™•ì¸ ==="
        echo "ANDROID_HOME: $ANDROID_HOME"
        echo "BUILD_TOOLS: $(ls $ANDROID_HOME/build-tools/ 2>/dev/null | tr '\n' ' ')"
        echo "Java: $(java -version 2>&1 | head -1)"
        
        # buildozer APK ë¹Œë“œ ì‹¤í–‰
        echo "\n=== buildozer ì‹¤í–‰ ==="
        buildozer android ${{ github.event.inputs.build_type || 'debug' }}

    - name: ğŸ“‚ ë¹Œë“œ ê²°ê³¼ í™•ì¸
      run: |
        ls -la bin/

    - name: ğŸš€ APK íŒŒì¼ ì—…ë¡œë“œ
      uses: actions/upload-artifact@v4
      with:
        name: bible-mp3-player-${{ github.event.inputs.build_type || 'debug' }}-apk
        path: bin/*.apk

    - name: âœ… ë¹Œë“œ ì™„ë£Œ ì•Œë¦¼
      run: |
        echo "ğŸ‰ APK ë¹Œë“œê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!"
        echo "ğŸ“± APK íŒŒì¼ì„ Artifactsì—ì„œ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."